# Staging Environment Configuration
# Copy this file to .env.staging and update the values

# ============================================
# SERVER CONFIGURATION
# ============================================
NODE_ENV=staging
PORT=3000

# ============================================
# DATABASE CONFIGURATION
# ============================================
# MongoDB connection string for staging
MONGODB_URI=mongodb://admin:your_secure_password_here@mongodb_staging:27017/schoman_staging?authSource=admin

# MongoDB root credentials (for docker-compose)
MONGO_ROOT_USERNAME=admin
MONGO_ROOT_PASSWORD=your_secure_password_here

# ============================================
# JWT CONFIGURATION
# ============================================
# IMPORTANT: Generate a strong secret using:
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
JWT_SECRET=your_jwt_secret_at_least_32_characters_long_staging
JWT_EXPIRES_IN=7d

# ============================================
# CORS CONFIGURATION
# ============================================
# Allowed origins for CORS (comma-separated)
ALLOWED_ORIGINS=http://localhost:5174,http://localhost:8081,https://staging.your-domain.com

# ============================================
# LOGGING CONFIGURATION
# ============================================
LOG_LEVEL=debug
LOG_FILE_PATH=./logs/staging.log

# ============================================
# CACHE CONFIGURATION (Optional)
# ============================================
# Redis configuration for caching
REDIS_HOST=redis_staging
REDIS_PORT=6379
REDIS_PASSWORD=
CACHE_TTL=3600

# ============================================
# EMAIL CONFIGURATION (Optional)
# ============================================
# Email service for notifications
SMTP_HOST=smtp.your-email-provider.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@domain.com
SMTP_PASSWORD=your-email-password
EMAIL_FROM=noreply@staging.your-domain.com

# ============================================
# FILE UPLOAD CONFIGURATION
# ============================================
MAX_FILE_SIZE=10485760  # 10MB in bytes
UPLOAD_PATH=./uploads

# ============================================
# BACKUP CONFIGURATION
# ============================================
ENABLE_SCHEDULED_BACKUPS=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=7

# ============================================
# MONITORING CONFIGURATION
# ============================================
ENABLE_PROMETHEUS_METRICS=true
METRICS_PORT=9090

# ============================================
# FEATURE FLAGS (Staging)
# ============================================
ENABLE_2FA=true
ENABLE_AUDIT_LOGS=true
ENABLE_EMAIL_NOTIFICATIONS=true
ENABLE_SMS_NOTIFICATIONS=false

# ============================================
# RATE LIMITING
# ============================================
RATE_LIMIT_WINDOW_MS=900000  # 15 minutes
RATE_LIMIT_MAX_REQUESTS=100
AUTH_RATE_LIMIT_MAX_REQUESTS=5

# ============================================
# SESSION CONFIGURATION
# ============================================
SESSION_SECRET=your_session_secret_at_least_32_characters_staging
SESSION_MAX_AGE=86400000  # 24 hours in milliseconds

# ============================================
# TESTING CONFIGURATION
# ============================================
# Test user credentials (for automated testing)
TEST_ADMIN_EMAIL=admin@staging.test
TEST_ADMIN_PASSWORD=Test@Admin123!
TEST_TEACHER_EMAIL=teacher@staging.test
TEST_TEACHER_PASSWORD=Test@Teacher123!
TEST_PARENT_EMAIL=parent@staging.test
TEST_PARENT_PASSWORD=Test@Parent123!

# ============================================
# EXTERNAL SERVICES (Optional)
# ============================================
# Sentry for error tracking (optional)
SENTRY_DSN=

# Google Analytics (optional)
GA_TRACKING_ID=

# ============================================
# NOTES
# ============================================
# 1. Never commit this file with actual values to git
# 2. Generate strong secrets for production use
# 3. Staging should mirror production configuration as closely as possible
# 4. Use different credentials than production
# 5. Enable debug logging for easier troubleshooting
